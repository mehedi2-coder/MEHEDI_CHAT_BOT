(function(){
  // সব ক্যাপশন ও ছবি লিঙ্ক Base64 এ
  const _0x64f3=[
    // ৩০+ ক্যাপশন (Base64)
    "4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU",
    "4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW",
    "4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc",
    "4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk",
    "4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg",
    "4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU",
    "4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW",
    "4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc",
    "4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk",
    "4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg",
    "4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU",
    "4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW",
    "4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc",
    "4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk",
    "4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg",
    "4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU",
    "4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW",
    "4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc",
    "4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk",
    "4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg",
    "4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU",
    "4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW4oCW",
    "4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc4oCc",
    "4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk4oCk",
    "4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg4oCg",
    
    // ২৫+ ছবি লিঙ্ক (Base64)
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9vNk93TDcxLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9qOEtXSlBjLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS8xdHpsMzgxLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9wVDJVVWUxLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9hV1dVMTNILmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9iaTBVc1NkLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9zaEh2M3ZDLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS94YU9VZGRhLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9KT0YzZ3BTLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9RYVVDTmpkLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9jSXM1S203LmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9CclpQR0xlLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9PbThDbUhYLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9sNUFOTWhjLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9ZSlN0Mm9FLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9XRVgwc3BYLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9FYm83ajRDLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9BRzFKTExBLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9ybllTaHhyLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9LN1Y4aVpPLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9nZFZQVDFwLmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9xaWNkVmM0LmpwZWc=",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9DUGxBYmkuanBlZw==",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS8xWTZNaVg=.anBlZw==",
    "aHR0cHM6Ly9pLmltZ3VyLmNvbS9ObUx6Y0JjLmpwZWc="
  ];

  // Array rotation for obfuscation
  (function(_arr,_seed){let _c=_seed; while(--_c){_arr.push(_arr.shift());}}(_0x64f3,0xA));

  // Base64 ডিকোডার
  const _decode = s=>Buffer.from(s,'base64').toString('utf8');
  const _rand = m=>Math.floor(Math.random()*m);

  // Config
  module.exports.config={
    name:"boti",
    version:"1.0.0",
    hasPermission:0,
    credits:_decode(_0x64f3[0]),
    description:"Random islamic reply with images when someone says Boti",
    commandCategory:"Islamic",
    usages:"[Bot]",
    cooldowns:2
  };

  // Helper: get stream from URL
  async function _getStream(u){
    try{if(global?.utils?.getStreamFromURL){return await global.utils.getStreamFromURL(u);}}catch(e){}
    const axios=require("axios"); const Stream=require("stream");
    const res=await axios.get(u,{responseType:"arraybuffer"});
    const s=new Stream.PassThrough(); s.end(Buffer.from(res.data,'binary')); return s;
  }

  // Main run
  module.exports.run=async function(_arg){
    try{
      const api=_arg.api,event=_arg.event; if(!api||!event) return; const tid=event.threadID;

      // Random reply
      const rIdx=_rand(_0x64f3.length-25); // শেষ ২৫টি ছবি
      const reply=_decode(_0x64f3[rIdx]);

      // Random image
      const iIdx=_0x64f3.length-25 + _rand(25);
      const img=_decode(_0x64f3[iIdx]);

      const msg={body:reply,attachment:await _getStream(img)};
      api.sendMessage(msg,tid,event.messageID);
    }catch(e){
      try{console.error(e);}catch{} 
      try{_arg.api.sendMessage("⚠️ Unable to send reply.",_arg.event.threadID);}catch{}
    }
  };

})();
